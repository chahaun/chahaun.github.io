---
layout: post
title:  "MongoDB 기본정리"
subtitle:   "MongoDB"
categories: study
tags: mongodb nosql
---

Mongo DB에 대한 기본 정리

# Mongo DB

### NoSQL vs SQL

NoSQL은 SQL을 사용하지 않는 Not only SQL이다.  
SQL과의 차이점은 데이터 입력이 규칙이 없어서 자유로우며, 고정된 테이블이 없다.  
테이블과 비슷한 컬렉션이라고 있으며, 몽고디비의 경우 컬렉션을 만들고 따로  
컬럼을 생성하지 않는다. 컬렉션에는 각 다큐먼트가(테이블의 row) 있는데,  
각 다큐먼트에는 서로 다른 데이터의 컬럼을 가질 수 있다.  

또한 SQL과 달리 JOIN기능이 없고, 트랜잭션을 지원하지 않는다.  
트랜잭션은 여러 쿼리가 모두 정상수행되거나 하나도 수행되지 않음을 보장하는 기능인데,  
지원하지 않아서 데이터 일관성에 문제가 생길 수 있다. (몽고디비 4부터 지원한다고 함)  

하지만 NoSQL을 사용하는 이유는 확장성과 가용성 때문이다. 데이터를 빠르게 넣으면서  
쉽게 여러 서버에 데이터를 분산하는 기능이 있기 때문이다.  
SQL의 table, row, column => collection, document, field  

여러 기업은 SQL과 NoSQL을 함께 사용하고 있다. 사용처가 알맞은 곳에 사용하면 되는 것이라,  
예를들어 예약 시스템에서 예약처리부분은 MySQL, 빅데이터/메시징/세션관리는 NoSQL을 사용한다.  

### 몽고디비 접속하기

몽고디비를 설치하고, 설치 후 C:\data\db 폴더를 생성해준다. 이후에 콘솔 창을 켜서  
mongod 명령어를 입력하면 몽고디비 서버를 실행할 수 있다.  
서버를 실행한 이후, 새로운 콘솔창에서 mongo 명령어를 입력하면 몽고디비 프롬프트에 접속되며  
누구나 몽고디비 접속할 수 있게 된다. 이제 계정을 만들어 주어야 하므로,  
use admin 명령어를 입력 후  
`db.createUser({ user: 'root', pwd: '비밀번호', roles: ['root'] })`  
명령어를 입력하여 root계정을 생성해준다. 이제 루트로 접속하기 위해 몽고디비 서버를 끈 후  
mongod --auth 명령어로 로그인이 필요한 몽고디비 서버를 켠 후에 새로운 콘솔창에서  
mongo admin -u root -p 비밀번호 명령을 통해 몽고디비에 접속해준다.  
몽고디비에는 compass라는 워크벤치와 비슷한 프로그램이다.  

### 몽고디비의 명령어 및 CRUD

use 데이터베이스명 : 데이터베이스를 하나 생성한다  
show dbs : 데이터베이스 목록 확인  
db : 현재 사용중인 데이터베이스 확인  
db.createCollection('컬렉션명') : db에 컬렉션 생성. 보통은 다큐먼트 넣을때 자동으로 생성.  
show collections : db의 컬렉션 목록 확인


